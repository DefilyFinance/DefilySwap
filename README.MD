<h1 align="center">SMART CONTRACT FRAMEWORK</h1>

## Structure
```
  Template
  ├─ .gitignore
  ├─ README.MD
  ├─ build  # artifacts json files (ABIs and bytecodes)
  │  └─ contracts
  │     ├─ Context.json
  │     ├─ ERC20.json
  │     ├─ IERC20.json
  │     ├─ SafeMath.json
  │     └─ StandardToken.json
  ├─ contracts # main contracts (with libraries) for development
  │  ├─ .gitkeep
  │  └─ StandardToken.sol
  ├─ flatten # flatten files (generated by truffle-flattener or use in remix)
  │  ├─ .keep
  │  └─ StandardToken.sol
  ├─ migrations # migration file(s) use for deployment
  │  ├─ .gitkeep
  │  └─ 1_initial_migration.js
  ├─ misc # miscellaneous files (keys, lists, etc.)
  ├─ package.json
  └─ truffle-config.js
  
```
### Prerequisites
  - Having `nodejs` version 12 or later installed  
  - Having `truffle` installed (preferably in global scope or run npx truffle .....)
  - Having metamask (or any web3 wallet provider) installed, or use HDWalletProvider (not recommended for security)
  - For local development, mainnet forking and testing, have ganache (either ganache UI or ganache-cli) installed
  - For mainnet deployment, have an Infura account with an API key.
  - For verification, have an API key of the desired explorer
  
### Setup
  - Run `npm i` to install all dependencies
  - Copy and paste `.sample.env` file, change to `.env` for env config (mainly API and keys)
  - Edit the `truffle-config.js` file to change solidity compiler version, optimization and network configs

### Deployment:
 - Run `truffle compile` to build contracts' artifacts
 - Open a new terminal and run `truffle dashboard` and connect to metamask (or any other wallet provider) on the truffle dashboard, change to the desired wallet and network on metamask, leave that terminal open during deployment
 - Remove `{overwrite: false}` in the migration files
 - Back to original terminal, run `truffle migrate --reset --network dashboard`, process on the truffle dashboard and confirm the transaction on metamask (check the data of transaction for any abnormality before deployment)

### Remix:
 - Use `Remix IDE` as an alternative
 - Connect local using `Ethereum Remix` plugin in the marketplace

### Test:
 - Run `truffle compile` to build contracts' artifacts
 - Open a new terminal and run `truffle dashboard` and connect to metamask (or any other wallet provider) on the truffle dashboard, change to the desired wallet and network on metamask, leave that terminal open during deployment
 - Back to original terminal, run `truffle console --network dashboard` to open the truffle console
 - Add `{overwrite: false}` in the migration files
 - Run `test ./test/${testfile}.${fileformat}` in the truffle console to run the unit test files, make changes and add files if need be

### Verification:
 - Run `truffle run verify ${contractName} --network ${network}` to verfiy a contract on a specific network (or dashboard for ease of use)
 - Run `truffle run verify ${contractName}@{contractAddress} --network ${network}` to verfiy a contract at a specific address
